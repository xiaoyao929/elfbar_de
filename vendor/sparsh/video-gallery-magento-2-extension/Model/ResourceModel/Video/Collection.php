<?php

/**
 * PHP version 7.1
 *
 * @category  Sparsh
 * @package   Sparsh_VideoGallery
 * @author    Sparsh <magento@sparsh-technologies.com>
 * @copyright 2019 This file was generated by Sparsh
 * @license   https://www.sparsh-technologies.com  Open Software License (OSL 3.0)
 * @link      https://www.sparsh-technologies.com
 */

namespace Sparsh\VideoGallery\Model\ResourceModel\Video;

use Magento\Framework\Model\ResourceModel\Db\Collection\AbstractCollection;

/**
 * PHP version 7.1
 *
 * @category  Sparsh
 * @package   Sparsh_VideoGallery
 * @author    Sparsh <magento@sparsh-technologies.com>
 * @copyright 2019 This file was generated by Sparsh
 * @license   https://www.sparsh-technologies.com  Open Software License (OSL 3.0)
 * @link      https://www.sparsh-technologies.com
 */
class Collection extends AbstractCollection
{

    /**
     * Id Initialize
     *
     * @var string
     */
    protected $_idFieldName = 'id';

    /**
     * Define resource model
     *
     * @return void
     */
    protected function _construct()
    {
        $this->_init(\Sparsh\VideoGallery\Model\Video::class, \Sparsh\VideoGallery\Model\ResourceModel\Video::class);
    }

    public function addStoreFilter($value)
    {
        $condition = $this->getConnection()->prepareSqlCondition('stores', ['finset' => $value]);
        $this->getSelect()->where(sprintf('(%s OR stores = "0")', $condition));
        return $this;
    }

    public function addCustomerGroups($value)
    {
        $condition = $this->getConnection()->prepareSqlCondition('customer_groups', ['finset' => $value]);
        $this->getSelect()->where(sprintf('(%s OR customer_groups = "all")', $condition));
        return $this;
    }
}
